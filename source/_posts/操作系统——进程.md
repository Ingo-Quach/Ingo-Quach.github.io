---
abbrlink: ''
categories:
- - 大学生涯
cover: https://cdn.jsdelivr.net/gh/Ingo-Quach/webTuChuang@main/Qexo/25/8/OS进程_c77ba634289175719e9587ff06cbf86a.jpg
date: '2025-01-16T23:35:28.603885+08:00'
tags:
- 操作系统
title: 操作系统学习笔记 —— 进程
top_img: https://cdn.jsdelivr.net/gh/Ingo-Quach/webTuChuang@main/Qexo/25/8/OS进程_c77ba634289175719e9587ff06cbf86a.jpg
updated: '2025-08-11T17:35:44.781+08:00'
---
# 进程

## \*定义

1. 进程是程序在处理器上的一次执行过程
2. 可以和别的计算并行执行的计算
3. 是系统进行资源分配和调度的一个独立单位
4. 是具有一定功能的程序关于某个数据集合的一次运行活动

### \*OS 引入进程的概念

* 理论角度：是对正在运行程序过程的抽象
* 实现角度：是一种数据结构 -> 为了有效管理和调度进入计算机系统运行的程序

## 进程与程序的关系

* 进程是动态概念、程序是静态概念
  * 进程：处理机上的一次执行过程
  * 程序：指令集和
* 进程是短暂的，是一个状态变化的过程、程序是永久的，可以长久保存
* 一个程序可以对应多个进程；一个进程可以包括多个程序，他们不是一一对应关系
* 进程可以新建进程，程序不能新建程序

## 进程特征

* 动态性：因调度执行，因无资源暂停，因撤销消亡
* 并发性：多个进程实体同时存在于内存，能在一段时间内同时运行
* 独立性：进程是独立运行的基本单位，是系统分配资源和调度的基本单位
* 异步性/制约性：进程以各自独立的不可预知的速度向前推进
* 结构性：进程实体有程序段、数据段以及进程控制块组成，又称为进程映像

## \*进程的状态与转换

### \*状态

### * 新建（new）：进程刚刚建立、未进入就绪队列

* 终止（exit）：一个进程正/异常接受，OS 已经释放它所占用的资源，但没有撤销时的状态
* 就绪（Ready）：进程已获得除了处理及以外的所有资源-> 一旦分配了处理机可以立即执行
* 执行/运行（Running）：一个进程获得必要的资源并正在处理机上执行
* 阻塞（Blocked）/等待（wait）/睡眠（sleep）：正在执行的进程，由于某事件而暂时无法执行下去（如等待输入/输出的完成） -> 即使非进程分配处理机也无法运行
* 挂起就绪（ready，suspend）：进程具备运行条件但在外存中** **-> 只有换到主存才被调度执行
* 挂起等待（blocked，sespend）：进程正在等待某一事件且在外存中

  ![进程1.png](https://cdn.jsdelivr.net/gh/Ingo-Quach/webTuChuang@main/Qexo/25/8/进程1_4be64880d558128b9a1f20bd6aa1627d.png)

## 图片待更新

### 转换

* 运行态 -> 等待：等待使用资源
* 等待 -> 就绪：资源得到满足
* 运行 -> 就绪：运行时间片到、出现更高优先权进程
* 就绪 -> CPU 空闲时选择一个就绪进程

# \*PCB 进程描述符（或进程控制块）的三类信息

## 进程标识信息

* 进程标识符：唯一标识进程的一个标识符 or 整数
* 家族关系：指明本进程与家族的关系，如父子进程标识
* 用户标识符：表明进程的所有者

## 进程现场信息

* 保留进程在运行时发存放在处理器中的各种信息
  * 包括：程序计数器、通用寄存器、程序状态字、栈指针等

## 进程控制信息

* 进程当前状态：说明进程当前所处状态
* 进程队列指针：用于记录 PCB 队列中下一个 PCB 的地址
* 进程优先级：反映进程获得 CPU 的优先级
* 通信信息：进程与其他进程所发生的信息交换
* 程序和数据地址：定位进程的程序和数据在内存/外存中的存放地址

# 进程映像 (Process Image)

* 某时刻进程的内容机器状态的集合

## 组成

* 进程控制块：每个进程捆绑一个控制块的标识信息、现场信息、控制信息
* 进程地址空间/内存中的进程：
  * 代码段：被执行的程序
  * 数据段：全局变量
  * 栈：保存临时数据，如：参数、返回地址
  * 堆：动态分配的内存

### PCB 是描述和管理进程的数据结构，是进程实体的一部分

* 操作系统创建 PCB
* OS 通过 PCB 感知进程的存在，**PCB 是进程存在的唯一标志**
* OS 通过** **PCB 了解进程状态：执行情况、进程让出处理器后所处的状态、断电信息等
* OS 通过** **PCB 来调度、控制和管理进程

### OS 会执行如下操作：

* 创建 PCB
* 修改 PCB
* 访问 PCB
* 回收 PCB

## 进程的控制和管理

* 进程控制的职能是对系统中的所有进程实施有效的管理
* 常见的进程控制功能有：进程创建、撤销、阻塞和唤醒
  * 功能一般由 OS** **内核原语实现
  * 原语是由若干条机器指令构成的，用以完成特定功能的一段程序，这段程序在执行期间不可分割

### 进程创建原语的功能是创建一个新进程

* 操作流程：
  * 向系统神奇一个空闲 PCB
  * 为新进程分配资源（如：内存空间）
  * 初始化新进程的 PCB
    * 在 PCB 中填入进程名、家族信息、程序和数据地址、进程优先级、资源清单以及进程状态等
  * 将新进程的 PCB 插入就绪队列

### 导致进程创建的原因

* 系统初始化
  * 启动 OS 通常会创建若干个前台和后台进程
* 正在运行的程序执行了创建进程的系统调用
  * 正在运行的程序创建一个或多个进程协助其工作
* 用户请求创建一个新进程
  * 交互式系统中，用户执行命令 or 启动程序
* 一个批处理作业的初始化
  * 作业调度选择中一个作业

## 模式切换

模式切换指的就是进程从用户态切换到内核态，而进程切换则指的是从进程A切换到进程B，进程切换的过程当中一定会发生模式切换，因为进程切换是需要操作系统的调度处理的。**进程切换**必须在操作系统的内核模式下进行

进程发生模式切换 or 进程切换的原因：

* 系统调用
* 中断（外设中断、时钟中断）
  * 中断可以使CPU从用户态切换为核心态，使操作系统获得计算机的控制权
* 异常（内存访问出错、除法溢出）
